## Как установить и настроить проект?

#### Данный проект можно поднять в docker для этого нужно вызывать команды из корневого каталога проекта

```cli
    docker compose build
    docker compose up
```

### Конфигурации docker находятся в директории docker

``` dir
  /docker/nginx/conf.d/default.conf - когфигурация nginx резервирует :89 порт
```

#### База данных тоже будет создана в docker под названием `skilla`

### Обратиться к API можно через любой REST клиент по адресу http://localhost:89

#### Установка пакетов из composer должна произойти автоматически если этого не произошло запустите команду

```bash
docker exec -i php8.3_skilla php artisan migrate
```

#### Заполнение БД тестовыми данными должны произойти автоматически если этого не произошло запустите команду

```bash
docker exec -i php8.3_skilla php artisan db:seed
```

#### Перед началом работы с API необходимо создать клиента Laravel Passport сделать это можно напрямую в контейнере

```bash
docker exec -i php8.3_skilla php artisan passport:client --password
```

#### Полученные данные необходимы для дальнейшего выпуска токенов в полях `client_id` и `client_secret`

## API взаимодействие

### Создать токен авторизации

```http
POST /passport/token
```

| Параметр        | Тип      | Описание                                 |
|:----------------|:---------|:-----------------------------------------|
| `username`      | `string` | **Обязательный**. email пользователя     |
| `password`      | `string` | **Обязательный**. пароль пользователя    |
| `grand_type`    | `string` | **Обязательный**. тип доступа "password" |
| `client_id`     | `string` | **Обязательный**. Идентификатор клиента  |
| `client_secret` | `string` | **Обязательный**. Секрет клиента         |

#### Заголовки необходимые для работы с API после авторизации

| Ключ            | Значение           | Описание                                |
|:----------------|:-------------------|:----------------------------------------|
| `Accept`        | `application/json` | **Обязательный**.                       |
| `Authorization` | `Bearer {{TOKEN}}` | **Обязательный**. Заголовок авторизации |

### Создать заказ в случае успеха вернёт созданный заказ

```http
POST /api/order
```

| Параметр         | Тип      | Описание                                    |
|:-----------------|:---------|:--------------------------------------------|
| `type_id`        | `bigint` | **Обязательный**. Идентификатор типа заказа |
| `partnership_id` | `bigint` | **Обязательный**. Идентификатор партнера    |
| `description`    | `string` | **Необязательный**. Описание                |
| `date`           | `string` | **Обязательный**. Дата в формате 1978-06-20 |
| `address`        | `string` | **Обязательный**. Адрес                     |
| `amount`         | `int`    | **Обязательный**. Стоимость                 |
| `status`         | `string` | **Необязательный**. Статус заказа           |

| Параметр         | Тип      | Описание                        |
|:-----------------|:---------|:--------------------------------|
| `type_id`        | `bigint` | Идентификатор типа заказа       |
| `partnership_id` | `bigint` | Идентификатор партнера          |
| `description`    | `string` | Описание                        |
| `date`           | `string` | Дата в формате 1978-06-20       |
| `address`        | `string` | Адрес                           |
| `amount`         | `int`    | Стоимость                       |
| `status`         | `string` | Статус заказа                   |
| `created_at`     | `date`   | Дата создания                   |
| `updated_at`     | `date`   | Дата обновления                 |
| `id`             | `bigint` | Идентификатор заказа обновления |

### Назначить исполнителя на заказ

```http
POST /api/order-bind-worker
```

| Параметр    | Тип      | Описание                                    |
|:------------|:---------|:--------------------------------------------|
| `order_id`  | `bigint` | **Обязательный**. Идентификатор заказа      |
| `worker_id` | `bigint` | **Обязательный**. Идентификатор исполнителя |
| `amount`    | `int`    | **Обязательный**. Стоимость                 |

| Параметр  | Тип    | Описание                        |
|:----------|:-------|:--------------------------------|
| `success` | `bool` | Успешно ли произошло назначение |

### Получить отфильтрованных исполнителей

```http
GET /api/workers
GET /api/workers?id_type[]=1&id_type[]=2
GET /api/workers?id_type=2
```

| Параметр  | Тип              | Описание                                                                                                       |
|:----------|:-----------------|:---------------------------------------------------------------------------------------------------------------|
| `id_type` | `string` `array` | **Необязательный**. Возвращает исполнителей с фильтрацией </br> в зависти если хотя бы 1 тип работ выполняется |

#### Ответ массив с типом

| Параметр      | Тип      | Описание                  |
|:--------------|:---------|:--------------------------|
| `id`          | `bigint` | Идентификатор исполнителя |
| `name`        | `string` | Имя исполнителя           |
| `second_name` | `string` | Второе имя исполнителя    |
| `surname`     | `string` | Фамилия                   |
| `phone`       | `string` | Телефон                   |
| `created_at`  | `date`   | Дата создания             |
| `updated_at`  | `date`   | Дата обновления           |
